# Eureka common
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.client.service-url.defaultZone=http://discovery-service:8761/eureka/

# Tracing
management.tracing.enabled=true
management.tracing.sampling.probability=1
management.otlp.tracing.endpoint=http://otel-collector:4318/v1/traces
# Enable histogram buckets for http server requests
management.metrics.distribution.percentiles-histogram.http.server.requests=true

# OTLP Metrics Export
management.otlp.metrics.export.url=http://otel-collector:4318/v1/metrics
management.otlp.metrics.export.step=10s
# Prometheus / monitoring
management.endpoints.web.exposure.include=prometheus,health,info,metrics
management.prometheus.metrics.export.enabled=true

# Logging
logging.pattern.correlation=[%X{traceId:-},%X{spanId:-}]
logging.include-application-name=false

spring.cloud.config.fail-fast=false

# Maximum number of times to attempt connecting to the Config Server.
# A high number ensures a long wait period.
spring.cloud.config.retry.max-attempts=30
# Initial delay before the first retry (in milliseconds).
spring.cloud.config.retry.initial-interval=1000
# Maximum delay between retry attempts (in milliseconds).
spring.cloud.config.retry.max-interval=10000

spring.rabbitmq.host=rabbitmq
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest

spring.rabbitmq.listener.simple.acknowledge-mode=auto
spring.rabbitmq.listener.simple.prefetch=1

spring.rabbitmq.listener.simple.retry.enabled=true
# Maximum number of attempts before moving the message (to DLQ)
spring.rabbitmq.listener.simple.retry.max-attempts=3
# Initial wait time before first retry
spring.rabbitmq.listener.simple.retry.initial-interval=5000ms
# Maximum interval cap (used with multiplier)
spring.rabbitmq.listener.simple.retry.max-interval=15000ms
# Multiplier for backoff (5s, 10s, 15s)
spring.rabbitmq.listener.simple.retry.multiplier=2.0
spring.rabbitmq.listener.simple.default-requeue-rejected=false